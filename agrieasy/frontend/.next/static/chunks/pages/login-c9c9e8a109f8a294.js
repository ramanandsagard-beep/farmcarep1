(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(4070)}])},4070:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s}});var a=t(5893),l=t(7294),o=t(8937),i=t(1163),c=t(5133);function s(){let[e,n]=(0,l.useState)("phone"),[t,s]=(0,l.useState)(""),[r,u]=(0,l.useState)(""),[d,h]=(0,l.useState)(!1),[m,p]=(0,l.useState)(null),g=(0,i.useRouter)(),{t:x}=(0,c.$G)("common"),b=async()=>{if(p(null),"phone"===e){if(!t||t.trim().length<4){p("Enter a valid phone number");return}}else if(!r||!r.includes("@")){p("Enter a valid email");return}h(!0);try{let n="email"===e?{email:r}:{phone:t};if((await (0,o.h)("/auth/check-user",{method:"POST",body:JSON.stringify(n)})).exists){let n="email"===e?"email=".concat(encodeURIComponent(r)):"phone=".concat(encodeURIComponent(t));g.push("/auth/signin?".concat(n))}else{let n="email"===e?"email=".concat(encodeURIComponent(r)):"phone=".concat(encodeURIComponent(t));g.push("/auth/signup?".concat(n))}}catch(e){p((null==e?void 0:e.message)||"Something went wrong. Try again.")}finally{h(!1)}};return(0,a.jsx)("div",{className:"max-w-md mx-auto bg-white p-6 rounded shadow",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:x("login")}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("button",{onClick:()=>n("phone"),className:"".concat("phone"===e?"bg-primary-green text-white":"bg-gray-200"," px-3 py-2 rounded"),children:x("phone")}),(0,a.jsx)("button",{onClick:()=>n("email"),className:"".concat("email"===e?"bg-primary-green text-white":"bg-gray-200"," px-3 py-2 rounded"),children:x("email")})]}),"phone"===e?(0,a.jsx)("input",{className:"border p-2 w-full mb-3",placeholder:x("phone"),value:t,onChange:e=>s(e.target.value)}):(0,a.jsx)("input",{className:"border p-2 w-full mb-3",placeholder:x("email"),value:r,onChange:e=>u(e.target.value)}),(0,a.jsx)("button",{onClick:b,disabled:d,className:"px-4 py-2 rounded w-full ".concat(d?"bg-gray-400":"bg-primary-green text-white"),children:d?"Please wait...":x("continue")}),m&&(0,a.jsx)("div",{className:"mt-3 text-sm text-red-600",children:m})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);